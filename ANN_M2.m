function [y1] = ANN_10_10_tt_mat(x1)
%ANN_10_10_TT_MAT neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 29-Oct-2023 16:45:54.
% 
% [y1] = ANN_10_10_tt_mat(x1) takes these arguments:
%   x = 5xQ matrix, input #1
% and returns:
%   y = 3xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [4.003549843;500.0132291;10000.14146;100.3214064;0.700006801];
x1_step1.gain = [0.181877174059877;0.0133351408583361;0.000133371508349082;0.000513028946799821;6.66687031733196];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.2335265183709946957;-1.9109588380253046402;-0.85669999543285202392;1.2482706500420031048;-0.56266834174185165196;0.58983471315148583436;0.24857777531347674538;2.2170295616110977655;-0.96203508273522708727;2.3347986846897739177];
IW1_1 = [-0.00028920699131266489881 0.00035485460436529683631 0.00073601586932107684099 -0.37965901175537081214 0.0029593222499366450724;0.0070641843907953737539 0.066048629359216945445 -0.55453874875185960036 0.079813310894983960364 0.064479455383576175787;0.020698546618321364554 0.11590650571506018462 0.15186834725716744088 0.066481780386479061296 0.14739640965403674744;-0.0033473313848363514186 0.0051356625266607419666 0.0016099186071649770457 -0.27593510012837113576 0.17688351350346884217;0.021187362043886413115 0.081138823780368796168 -0.030073939618329680046 0.054244469367257783232 -0.004537138816696384587;-5.339875816657201692e-05 7.9837078415158699426e-05 -8.1606912932003774705e-05 -0.12634757503834118109 2.8444633845087707939e-05;-0.027966140784686649434 -0.018910204981094337617 0.017913934311090430607 -0.09347307053126438503 0.073307806768422884014;0.0028212560643812128851 0.0092630451638955734611 0.0051335982657246970878 0.47840713197897510867 0.10612985241851478901;0.013870473933631912583 -0.24484483384022898145 0.23710625745786176322 0.2533066465579171811 0.017674947173717103083;0.69069548394044588679 0.040655908245215019448 0.0071087008090025879253 -0.12648453614247362475 -0.059550364432115768243];

% Layer 2
b2 = [-2.0823082388657532249;-0.67435121164154043782;0.73707298902844797794;-1.1485845935577432275;-0.9337453317621141613;0.29224745235472954219;-0.41597528131947969499;0.76817513242120982753;-1.7618528820376457844;-1.8697750459906017362];
LW2_1 = [1.2300347067440688953 -1.1057271213914228181 0.54856153120907624743 0.70437666584478808574 -1.4012760720460017971 1.1833818879706445859 -0.50666931789443336864 0.031617881667047390004 0.49232590396517617037 0.11346990724792650751;0.99247866703836440383 0.17584028750929406315 -0.064401080309409414193 0.12502078764424173762 -0.27367594490457725076 1.0686175258175645286 -0.25108030484110432923 1.2598852670265299203 -0.022490361708567784688 -0.26763474009799992359;-0.50929432956860432036 0.88429321536205007792 -0.45175944127013473173 -1.0080429374113673013 1.3322449160871305818 2.1311944358348706707 0.48174621343912649163 -0.0401854027600643815 -0.33619242348320688141 -0.13937042521794462679;-0.29389972348090925847 0.14634515108288712049 0.036098382483168142687 -1.8415021768464698848 1.0523056671384936056 0.056514093823498749714 1.3010860927410103915 1.5909528605668243895 -0.0070387842797498935757 0.70959167987285687307;-1.4235394950518627244 1.8648277816483862512 -0.38902173672540835137 0.37286877131952411712 -0.8021999965472792482 -1.4292822870178940597 -0.18464988007849403306 0.62579900338138938487 0.31701330535394084409 -0.012173484908850260716;-0.24834754682377907509 0.038334246995720105966 -0.013803319517839075098 0.016307513167328931136 -0.049704458767957038212 -1.6392610019355609019 -0.041412614409906692292 0.2950704733000223956 -0.0051924072078817305048 -0.052614176358803721456;-0.97537932063209231703 -0.37413306467572732261 0.11568973230480335268 0.26977884119622730363 -1.1593807340083166491 -1.2843057052154698283 -2.1364526630347482339 0.53867630482869854891 -0.085354098798150007665 0.90807694304828712184;1.6433317022283517872 0.46867119773030058161 -0.14330149080450582666 1.1478333794683039937 -0.35027737565253697083 2.633784099543557744 -0.49363980200207124849 -0.88821350186911107727 -0.055310342007849282175 -0.71286462788745919017;-1.3843851467893766305 0.3028096323374782628 -0.048632350507864255396 0.23794541416122441668 0.65000008219639171525 -2.5668298672581393305 1.3600816090743497178 1.258209243935034749 -0.0056567640083665139683 -0.28844508547717928604;-1.8669309395878381785 -2.0677554067572172514 0.42060626698102393517 -0.16128791944023959659 0.43042821986974855175 -0.68987946785688325502 0.08446809866333791772 -0.060953373518039845325 -0.47705273383834440049 0.23270035962327909052];

% Layer 3
b3 = [-1.3031918070735433179;1.4852010416234446843;0.08901805809164191341];
LW3_2 = [-2.444439216890993638 -3.101096540171605298 -2.8590633652767416528 -0.5253332955051662756 -4.4126766943478434868 2.8033657324342051709 0.11847167379901678286 0.33694952111338105638 0.69668825968320302611 -2.3322291213154935363;0.27189232990835837667 -2.3377645354291276547 0.390473244750138615 -0.87181725101417051338 0.060276305954941072907 1.3749468786244367635 1.4318858380891503757 0.38105967736553647551 3.7151719061387722398 -0.059428151760496844558;0.23250469125256659209 0.38388008949478580334 0.22358322475960371034 0.540065089029795109 0.64644921280952161169 5.5301573112755511019 -0.85395650268676515093 -0.25900593277232575318 -2.2017667629461250556 0.40206025215216928403];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.00481286617108168;0.0013255625965874;0.000744427057415394];
y1_step1.xoffset = [5.306148688;27.64896119;55.84671267];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = repmat(b3,1,Q) + LW3_2*a2;

% Output 1
y1 = mapminmax_reverse(a3,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
